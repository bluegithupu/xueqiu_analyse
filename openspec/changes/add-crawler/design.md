## Context

爬虫模块负责从雪球获取用户公开内容。雪球有反爬机制，需要合法的 cookies 和合理的请求频率。

### 约束
- 不实现自动登录，用户手动复制浏览器 cookies
- 需要防封策略（限速、User-Agent、重试退避）
- 支持增量抓取，避免重复下载

## Goals / Non-Goals

**Goals:**
- 可靠获取指定用户的全部公开文章/动态
- 转换为结构化 Markdown 存储
- 支持断点续爬

**Non-Goals:**
- 不实现自动登录
- 不抓取需要登录才能访问的内容
- 不实现分布式爬虫

## Decisions

### 1. HTTP 客户端架构
- **决策**: 使用 `requests.Session` 封装，单例模式
- **理由**: 简单可靠，自动管理 cookies 和连接池

### 2. API 优先策略
- **决策**: 优先使用雪球 JSON API，HTML 解析作为后备
- **理由**: JSON 更稳定，解析成本低

### 3. 增量抓取实现
- **决策**: 使用 `crawl_state.json` 记录进度
- **理由**: 无数据库依赖，文件系统原生支持

### 4. 限速策略
- **决策**: 请求间隔 1-2 秒，指数退避重试
- **理由**: 平衡效率与安全

## Risks / Trade-offs

| 风险 | 缓解措施 |
|------|----------|
| Cookies 过期 | 检测登录页重定向，提示用户更新 |
| API 变更 | 模块化设计，易于适配 |
| IP 封禁 | 合理限速，可配置间隔 |

## Open Questions

- 雪球是否有公开的 API 文档？（需实际探索）
- 单次最多返回多少条内容？（需测试确认）
